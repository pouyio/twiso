var J=Object.create;var l=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var A=(e,t)=>{for(var o in t)l(e,o,{get:t[o],enumerable:!0})},I=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of w(t))!x.call(e,n)&&n!==o&&l(e,n,{get:()=>t[n],enumerable:!(s=X(t,n))||s.enumerable});return e};var H=(e,t,o)=>(o=e!=null?J(T(e)):{},I(t||!e||!e.__esModule?l(o,"default",{value:e,enumerable:!0}):o,e)),M=e=>I(l({},"__esModule",{value:!0}),e);var C={};A(C,{Img:()=>P,useImage:()=>m});module.exports=M(C);var d=H(require("react"),1);var h=require("react");var u=({decode:e=!0,crossOrigin:t=""})=>o=>new Promise((s,n)=>{let r=new Image;t&&(r.crossOrigin=t),r.onload=()=>{e&&r.decode?r.decode().then(s).catch(n):s()},r.onerror=n,r.src=o});var S=e=>e.filter(t=>t),b=e=>Array.isArray(e)?e:[e],i={},v=(e,t)=>{let o=!1;return new Promise((s,n)=>{let r=a=>t(a).then(()=>{o=!0,s(a)});e.reduce((a,c)=>a.catch(()=>{if(!o)return r(c)}),r(e.shift())).catch(n)})};function m({srcList:e,imgPromise:t=u({decode:!0}),useSuspense:o=!0}){let[,s]=(0,h.useState)(!1),n=S(b(e)),r=n.join("");if(i[r]||(i[r]={promise:v(n,t),cache:"pending",error:null}),i[r].cache==="resolved")return{src:i[r].src,isLoading:!1,error:null};if(i[r].cache==="rejected"){if(o)throw i[r].error;return{isLoading:!1,error:i[r].error,src:void 0}}if(i[r].promise.then(a=>{i[r]={...i[r],cache:"resolved",src:a},o||s(r)}).catch(a=>{i[r]={...i[r],cache:"rejected",error:a},o||s(r)}),o)throw i[r].promise;return{isLoading:!0,src:void 0,error:null}}var f=e=>e;function N({decode:e=!0,src:t=[],loader:o=null,unloader:s=null,container:n=f,loaderContainer:r=f,unloaderContainer:a=f,imgPromise:c,crossorigin:L,useSuspense:g=!1,...y},E){c=c||u({decode:e,crossOrigin:L});let{src:p,isLoading:R}=m({srcList:t,imgPromise:c,useSuspense:g});return p?n(d.default.createElement("img",{src:p,...y,ref:E})):!g&&R?r(o):!g&&s?a(s):null}var P=(0,d.forwardRef)(N);
