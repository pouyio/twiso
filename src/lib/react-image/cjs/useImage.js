var a=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var p=(r,o)=>{for(var t in o)a(r,t,{get:o[t],enumerable:!0})},y=(r,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of g(o))!h.call(r,n)&&n!==t&&a(r,n,{get:()=>o[n],enumerable:!(s=l(o,n))||s.enumerable});return r};var P=r=>y(a({},"__esModule",{value:!0}),r);var v={};p(v,{default:()=>f});module.exports=P(v);var u=require("react");var d=({decode:r=!0,crossOrigin:o=""})=>t=>new Promise((s,n)=>{let e=new Image;o&&(e.crossOrigin=o),e.onload=()=>{r&&e.decode?e.decode().then(s).catch(n):s()},e.onerror=n,e.src=t});var L=r=>r.filter(o=>o),w=r=>Array.isArray(r)?r:[r],i={},I=(r,o)=>{let t=!1;return new Promise((s,n)=>{let e=c=>o(c).then(()=>{t=!0,s(c)});r.reduce((c,m)=>c.catch(()=>{if(!t)return e(m)}),e(r.shift())).catch(n)})};function f({srcList:r,imgPromise:o=d({decode:!0}),useSuspense:t=!0}){let[,s]=(0,u.useState)(!1),n=L(w(r)),e=n.join("");if(i[e]||(i[e]={promise:I(n,o),cache:"pending",error:null}),i[e].cache==="resolved")return{src:i[e].src,isLoading:!1,error:null};if(i[e].cache==="rejected"){if(t)throw i[e].error;return{isLoading:!1,error:i[e].error,src:void 0}}if(i[e].promise.then(c=>{i[e]={...i[e],cache:"resolved",src:c},t||s(e)}).catch(c=>{i[e]={...i[e],cache:"rejected",error:c},t||s(e)}),t)throw i[e].promise;return{isLoading:!0,src:void 0,error:null}}
