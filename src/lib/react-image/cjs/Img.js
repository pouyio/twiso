var R=Object.create;var l=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var A=(e,t)=>{for(var o in t)l(e,o,{get:t[o],enumerable:!0})},h=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of X(t))!T.call(e,n)&&n!==o&&l(e,n,{get:()=>t[n],enumerable:!(i=J(t,n))||i.enumerable});return e};var H=(e,t,o)=>(o=e!=null?R(w(e)):{},h(t||!e||!e.__esModule?l(o,"default",{value:e,enumerable:!0}):o,e)),M=e=>h(l({},"__esModule",{value:!0}),e);var C={};A(C,{default:()=>N});module.exports=M(C);var d=H(require("react"),1);var I=require("react");var m=({decode:e=!0,crossOrigin:t=""})=>o=>new Promise((i,n)=>{let r=new Image;t&&(r.crossOrigin=t),r.onload=()=>{e&&r.decode?r.decode().then(i).catch(n):i()},r.onerror=n,r.src=o});var S=e=>e.filter(t=>t),b=e=>Array.isArray(e)?e:[e],s={},v=(e,t)=>{let o=!1;return new Promise((i,n)=>{let r=c=>t(c).then(()=>{o=!0,i(c)});e.reduce((c,a)=>c.catch(()=>{if(!o)return r(a)}),r(e.shift())).catch(n)})};function f({srcList:e,imgPromise:t=m({decode:!0}),useSuspense:o=!0}){let[,i]=(0,I.useState)(!1),n=S(b(e)),r=n.join("");if(s[r]||(s[r]={promise:v(n,t),cache:"pending",error:null}),s[r].cache==="resolved")return{src:s[r].src,isLoading:!1,error:null};if(s[r].cache==="rejected"){if(o)throw s[r].error;return{isLoading:!1,error:s[r].error,src:void 0}}if(s[r].promise.then(c=>{s[r]={...s[r],cache:"resolved",src:c},o||i(r)}).catch(c=>{s[r]={...s[r],cache:"rejected",error:c},o||i(r)}),o)throw s[r].promise;return{isLoading:!0,src:void 0,error:null}}var g=e=>e;function x({decode:e=!0,src:t=[],loader:o=null,unloader:i=null,container:n=g,loaderContainer:r=g,unloaderContainer:c=g,imgPromise:a,crossorigin:L,useSuspense:u=!1,...P},y){a=a||m({decode:e,crossOrigin:L});let{src:p,isLoading:E}=f({srcList:t,imgPromise:a,useSuspense:u});return p?n(d.default.createElement("img",{src:p,...P,ref:y})):!u&&E?r(o):!u&&i?c(i):null}var N=(0,d.forwardRef)(x);
